<!DOCTYPE html>
<html lang="en">

  <head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="MySQL Binary logs. Or how did I dropped 2 years news archive without any backups

Heartbreaking...">
    <meta name="author" content="Team intermaniac">
    <link href="https://fonts.googleapis.com/css?family=Roboto:100,100i,300,300i,400,400i,500,500i,700,700i,900,900i&display=swap" rel="stylesheet">

    <title>Mysql binary logs. or how did i dropped 2 years...</title>

    <!-- Bootstrap core CSS -->
    <link href="../vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">


    <!-- Additional CSS Files -->
    <link rel="stylesheet" href="../assets/css/fontawesome.css">
    <link rel="stylesheet" href="../assets/css/templatemo-stand-blog.css">
    <link rel="stylesheet" href="../assets/css/owl.css">

  </head>


<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-5BWRY8HGLE"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-5BWRY8HGLE');
</script>


  <body>

    <!-- ***** Preloader Start ***** -->
    <div id="preloader">
        <div class="jumper">
            <div></div>
            <div></div>
            <div></div>
        </div>
    </div>
    <!-- ***** Preloader End ***** -->

    <!-- Header -->
    <header class="">
      <nav class="navbar navbar-expand-lg">
        <div class="container">
          <a class="navbar-brand" href="../index.html"><h2>Technology Blog<em>.</em></h2></a>
          <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarResponsive">
            <ul class="navbar-nav ml-auto">
              <li class="nav-item">
                <a class="nav-link" href="../index.html">Home
                  <span class="sr-only">(current)</span>
                </a>
              </li>
              <li class="nav-item">
                <a class="nav-link d-none" href="../about.html">About Us</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="../blog.html">Blog Entries</a>
              </li>
              <li class="nav-item active">
                <a class="nav-link d-none" href="../post-details.html">Post Details</a>
              </li>
              <li class="nav-item">
                <a class="nav-link d-none" href="../contact.html">Contact Us</a>
              </li>
            </ul>
          </div>
        </div>
      </nav>
    </header>

    <!-- Page Content -->
    <!-- Banner Starts Here -->
    <div class="heading-page header-text">
      <section class="page-heading">
        <div class="container">
          <div class="row">
            <div class="col-lg-12">
              <div class="text-content">
                <h2>Mysql binary logs. or how did i dropped 2 years...</h2>
              </div>
            </div>
          </div>
        </div>
      </section>
    </div>



    <section class="blog-posts grid-system">
      <div class="container">
        <div class="row">
          <div class="col-lg-8">
            <div class="all-blog-posts">
              <div class="row">
                <div class="col-lg-12">
                  <div class="blog-post">
                    <div class="blog-thumb d-none">
                      <img src="../assets/images/blog-post-02.jpg" alt="">
                    </div>
                    <div class="down-content">
                      <span>Mysql binary logs. or how did i dropped 2 years...</span>
                      <a href="#"><h4>MySQL Binary logs. Or how did I dropped 2 years news archive without any backups

Heartbreaking...</h4></a>
                      <ul class="post-info">
                        <li><a href="#">Admin</a></li>
                        <li><a href="#">2022-12-10 07:15:29.557779</a></li>

                      </ul>
                      <p>MySQL Binary logs. Or how did I dropped 2 years news archive without any backups

Heartbreaking Thread ðŸ‘‡<br><br>Probably it doesn't sound way too much professionally, but it's pure TRUE.

Many years ago, at the very beginning of my developer's career, I was working at local TV channel as a PHP dev. 

Actually it was my first full-time job at webdev. It was 2008 or something like this<br><br>When I have just started there was Joomla.

Site had main domain with news and many more and also some static subdomains for TV shows. I am not even sure how it all worked

But we decided to switch to WordPress. It was my very first big project<br><br>During development of WordPress migration, we received another requirement - create some page for journalists to simplify adding of news for them.

We understood, that very soon we'll have more convenient WordPress, but we should have deliver this function much faster<br><br>OK, it was something like Tuesday evening or something like this.

I investigated where it all is stored in Joomla database and was playing already with inserting posts into that table.

On PROD. Remember, it's really urgent<br><br>Obviously, post has some status and I was adding all testing posts with draft status or something like this.

So it didn't affect actually prod.

You will probably ask why junior dev had an access to PROD? I don't know :) We was a small department and previously all was well ;)<br><br>I was adding post after post, tuning up "admin" page to add more and more fields and keep it simple.

Then was going to PHPMyAdmin to remove last 10-20 posts I have added.

More and more. Hour after hour. I understood that it will be a long evening, because I need more features<br><br>... let's say images, formatting, so on.

But on another iteration I am selecting last 10 posts and pressing DROP... Not remove.

Table is actually DROPPED. Site is down. Hello :)<br><br>I am running to my manager (senior dev) to report we are down and where backups are.

He asks something like "You did it at prod? Why not at localhost? Why I gave you this fucking access... We don't have backups". Tadam.<br><br>"Please be quiet, let's restore it" he says.

It was something around 9PM already and office was almost empty. We enabled some maintenance page and said to another manager we are going to release, so it's temporary... ðŸ¤«ðŸ¤«ðŸ¤«

And started to look for backups.<br><br>After few hours I understood it's not a joke. We don't have neither backups nor news for 2 last years. Few months before site was migrated to new server, backups was on previous, but new regular backup is not configured YET<br><br>I started to realise it's probably last day at my first fulltime dev job.

But my colleague said something like "Don't worry, we will try to solve it somehow". We started to google, check MySQL server configs and so on.

And finally found Binary Logs.<br><br>I even didn't know about this feature. Honestly, I didn't know a lot on that stage :)

Usually this function is enabled to prevent garbage at the disk. 

But remember, it's new server which wasn't fully configured YET :)<br><br>And we started to restore.

After 5-6 hours and 3-4 attempts we finally restored the table with posts except something like 7-10 entries, which I restored from docs manually.

We finished at smth like 3AM

It was much stressful... But funny :) I owed much beers to my colleague<br><br>Next day I have finished that tricky page, and honestly no one used it after release :)

Only migration to WordPress months after helped to involve content creators into admin.

But we'd got a lot of lessons that night...<br><br>Finally, lessons:
1. Backups. Always. ASAP at new server. Check it time-to-time
2. Don't edit at prod. Spend time on local/staging enviro
3. It's better to check Junior's code via PRs (to be honest, I am even not sure that GitHub existed that days)<br><br>It was so long time ago, that to setup local enviro we used Compact Disc ðŸ˜‚ðŸ˜‚ðŸ˜‚

But lessons are still relevant.

Take care, guys! Have a nice development week :) Don't be like Denis, check your backup and approve code to prod via Pull Request :)

Cheers :)<br><br>Meant DISABLED here: <a href="https://t.co/gYacV6PKwM">https://t.co/gYacV6PKwM</a>

Bin Logs are usually disabled, just because it stores every write request to huuuge log file which grows pretty fast. But was enabled by default on that server.</p>
                      <div class="post-options">
                        <div class="row">
                          <div class="col-12">
                            <ul class="post-tags">
                              <li><i class="fa fa-tags"></i></li>
								<li><a href="#">backups Heartbreaking Thread</a></li>
<li><a href="#">Heartbreaking Thread</a></li>
<li><a href="#">PROD</a></li>
<li><a href="#">backups</a></li>
<li><a href="#">posts</a></li>
                            </ul>
                          </div>
                          <!--<div class="col-6">
                            <ul class="post-share">
                              <li><i class="fa fa-share-alt"></i></li>
                              <li><a href="#">Facebook</a>,</li>
                              <li><a href="#"> Twitter</a></li>
                            </ul>
                          </div>-->
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="col-lg-12">
                  <div class="sidebar-item comments">
                    <div class="sidebar-heading">

                    </div>
                    <div class="content">
                      <ul>

                      </ul>
                    </div>
                  </div>
                </div>
                <div class="col-lg-12">
                  <div class="sidebar-item submit-comment">
                    <div class="sidebar-heading">

                    </div>
                    <div class="content">

                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="col-lg-4">
            <div class="sidebar">
              <div class="row">
                <div class="col-lg-12">
                  <div class="sidebar-item search">
                    <form id="search_form" name="gs" method="GET" action="#">
                      <input type="text" name="q" class="searchText" placeholder="type to search..." autocomplete="on">
                    </form>
                  </div>
                </div>
                <div class="col-lg-12">
                  <div class="sidebar-item recent-posts d-none">
                    <div class="sidebar-heading">
                      <h2>Recent Posts</h2>
                    </div>
                    <div class="content">
                      <ul>
                        <li><a href="post-details.html">
                          <h5>Vestibulum id turpis porttitor sapien facilisis scelerisque</h5>
                          <span>May 31, 2020</span>
                        </a></li>
                        <li><a href="post-details.html">
                          <h5>Suspendisse et metus nec libero ultrices varius eget in risus</h5>
                          <span>May 28, 2020</span>
                        </a></li>
                        <li><a href="post-details.html">
                          <h5>Swag hella echo park leggings, shaman cornhole ethical coloring</h5>
                          <span>May 14, 2020</span>
                        </a></li>
                      </ul>
                    </div>
                  </div>
                </div>
                <div class="col-lg-12">
                  <div class="sidebar-item categories d-none">
                    <div class="sidebar-heading">
                      <h2>Categories</h2>
                    </div>
                    <div class="content">
                      <ul>
                        <li><a href="#">- Nature Lifestyle</a></li>
                        <li><a href="#">- Awesome Layouts</a></li>
                        <li><a href="#">- Creative Ideas</a></li>
                        <li><a href="#">- Responsive Templates</a></li>
                        <li><a href="#">- HTML5 / CSS3 Templates</a></li>
                        <li><a href="#">- Creative &amp; Unique</a></li>
                      </ul>
                    </div>
                  </div>
                </div>
                <div class="col-lg-12">
                  <div class="sidebar-item tags">
                    <div class="sidebar-heading">
                      <h2>Tag Clouds</h2>
                    </div>
                    <div class="content d-none">
                      <ul>
                        <li><a href="#">Lifestyle</a></li>
                        <li><a href="#">Creative</a></li>
                        <li><a href="#">HTML5</a></li>
                        <li><a href="#">Inspiration</a></li>
                        <li><a href="#">Motivation</a></li>
                        <li><a href="#">PSD</a></li>
                        <li><a href="#">Responsive</a></li>
                      </ul>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>


    <footer>
      <div class="container">
        <div class="row">
          <div class="col-lg-12">
            <ul class="social-icons">
              <li><a href="#">Facebook</a></li>
              <li><a href="#">Twitter</a></li>
              <li><a href="#">Behance</a></li>
              <li><a href="#">Linkedin</a></li>
              <li><a href="#">Dribbble</a></li>
            </ul>
          </div>
          <div class="col-lg-12">
            <div class="copyright-text">

            </div>
          </div>
        </div>
      </div>
    </footer>


    <!-- Bootstrap core JavaScript -->
    <script src="../vendor/jquery/jquery.min.js"></script>
    <script src="../vendor/bootstrap/js/bootstrap.bundle.min.js"></script>


    <!-- Additional Scripts -->
    <script src="../assets/js/custom.js"></script>
    <script src="../assets/js/owl.js"></script>
    <script src="../assets/js/slick.js"></script>
    <script src="../assets/js/isotope.js"></script>
    <script src="../assets/js/accordions.js"></script>


    <script language = "text/Javascript">
      cleared[0] = cleared[1] = cleared[2] = 0; //set a cleared flag for each field
      function clearField(t){                   //declaring the array outside of the
      if(! cleared[t.id]){                      // function makes it static and global
          cleared[t.id] = 1;  // you could use true and false, but that's more typing
          t.value='';         // with more chance of typos
          t.style.color='#fff';
          }
      }
    </script>

<!--1616155966248717951-->

  </body>

</html>
